<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cab/Taxi Route Optimization</title>
<style>
body {
  font-family: "Poppins", sans-serif;
  background: linear-gradient(135deg, #89f7fe, #66a6ff);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  background: #fff;
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  width: 90%;
  max-width: 600px;
  text-align: center;
}

h2 {
  color: #333;
  margin-bottom: 15px;
}

select, button {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin: 8px;
  width: 45%;
}

button {
  background: #007bff;
  color: white;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background: #0056b3;
}

.result {
  margin-top: 20px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 10px;
  text-align: left;
}

canvas {
  margin-top: 20px;
  border-radius: 10px;
  background: #eef7ff;
}
</style>
</head>
<body>
<div class="container">
  <h2>üöñ Cab/Taxi Route Optimization</h2>
  <p>Select Source and Destination:</p>

  <select id="source">
    <option value="0">A (Railway)</option>
    <option value="1">B (Bus Stand)</option>
    <option value="2">C (Airport)</option>
    <option value="3">D (Mall)</option>
    <option value="4">E (Hospital)</option>
    <option value="5">F (University)</option>
  </select>

  <select id="destination">
    <option value="1">B (Bus Stand)</option>
    <option value="2">C (Airport)</option>
    <option value="3">D (Mall)</option>
    <option value="4">E (Hospital)</option>
    <option value="5">F (University)</option>
  </select>
  <br>

  <button onclick="findRoute()">Find Best Route</button>

  <div class="result" id="output"></div>
  <canvas id="mapCanvas" width="550" height="350"></canvas>
</div>

<script>
const coords = [
  [100, 100], [200, 80], [200, 180],
  [350, 80], [350, 180], [480, 130]
];

const edges = [
  [0,1,4,6],[0,2,3,5],[1,3,3,4],[2,4,3,4],
  [3,5,2,3],[4,5,2,2],[1,2,5,10]
];

function heuristic(a, b) {
  let dx = coords[a][0] - coords[b][0];
  let dy = coords[a][1] - coords[b][1];
  return Math.sqrt(dx*dx + dy*dy);
}

function dijkstra(src, dest) {
  let dist = Array(6).fill(Infinity), parent = Array(6).fill(-1);
  dist[src] = 0;
  let pq = [[0, src]];
  while (pq.length) {
    pq.sort((a,b)=>a[0]-b[0]);
    let [d,u] = pq.shift();
    if (u === dest) break;
    for (let [v1,v2,distKm] of edges) {
      if (v1===u || v2===u) {
        let v = (v1===u)?v2:v1;
        if (dist[v] > d + distKm) {
          dist[v] = d + distKm;
          parent[v] = u;
          pq.push([dist[v], v]);
        }
      }
    }
  }
  return [dist[dest], parent];
}

function astar(src, dest) {
  let g = Array(6).fill(Infinity), f = Array(6).fill(Infinity), parent = Array(6).fill(-1);
  g[src] = 0; f[src] = heuristic(src,dest);
  let pq = [[f[src], src]];
  while (pq.length) {
    pq.sort((a,b)=>a[0]-b[0]);
    let [score,u] = pq.shift();
    if (u === dest) break;
    for (let [v1,v2,distKm,time] of edges) {
      if (v1===u || v2===u) {
        let v = (v1===u)?v2:v1;
        let tempG = g[u] + time;
        if (tempG < g[v]) {
          g[v] = tempG;
          f[v] = g[v] + heuristic(v,dest);
          parent[v] = u;
          pq.push([f[v], v]);
        }
      }
    }
  }
  return [g[dest], parent];
}

function reconstructPath(parent, src, dest) {
  let path = [], v = dest;
  while (v !== -1) {
    path.push(v);
    v = parent[v];
  }
  return path.reverse();
}

function drawMap(pathD = [], pathA = []) {
  const ctx = document.getElementById("mapCanvas").getContext("2d");
  ctx.clearRect(0, 0, 550, 350);

  // draw edges
  ctx.strokeStyle = "#999";
  ctx.lineWidth = 2;
  for (let [a,b] of edges) {
    ctx.beginPath();
    ctx.moveTo(coords[a][0], coords[a][1]);
    ctx.lineTo(coords[b][0], coords[b][1]);
    ctx.stroke();
  }

  // highlight A* path
  ctx.strokeStyle = "#ff6b6b";
  ctx.lineWidth = 4;
  for (let i=0; i<pathA.length-1; i++) {
    ctx.beginPath();
    ctx.moveTo(coords[pathA[i]][0], coords[pathA[i]][1]);
    ctx.lineTo(coords[pathA[i+1]][0], coords[pathA[i+1]][1]);
    ctx.stroke();
  }

  // draw nodes
  coords.forEach((c, i) => {
    ctx.beginPath();
    ctx.arc(c[0], c[1], 18, 0, Math.PI*2);
    ctx.fillStyle = "#007bff";
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = "white";
    ctx.font = "bold 14px Poppins";
    ctx.textAlign = "center";
    ctx.fillText(String.fromCharCode(65+i), c[0], c[1]+5);
  });
}

function findRoute() {
  const src = parseInt(document.getElementById("source").value);
  const dest = parseInt(document.getElementById("destination").value);

  const [distD, parentD] = dijkstra(src, dest);
  const [timeA, parentA] = astar(src, dest);

  const pathD = reconstructPath(parentD, src, dest);
  const pathA = reconstructPath(parentA, src, dest);

  document.getElementById("output").innerHTML = `
    <b>üìç Shortest Path (Dijkstra):</b> ${pathD.map(i=>String.fromCharCode(65+i)).join(" ‚Üí ")}<br>
    <b>Distance:</b> ${distD} km<br><br>
    <b>‚ö° Fastest Path (A*):</b> ${pathA.map(i=>String.fromCharCode(65+i)).join(" ‚Üí ")}<br>
    <b>Time:</b> ${timeA} minutes<br><br>
    ‚úÖ <b>Recommended Route:</b> A* (Faster)
  `;

  drawMap(pathD, pathA);
}

drawMap();
</script>
</body>
</html>
